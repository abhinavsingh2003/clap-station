{% extends "base.html" %}
{% load static %}

{% block title %}
Home | Clap Station 
{% endblock title %}

{% block webpage %}

<div id="bookModal" class="book-modal modal fade" role="dialog">
	<div class="modal-dialog">

	  <!-- Modal content-->
	  <div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title">share your Post</h1>
			  
			</div>
			<div class="modal-body">
				<div class="book-body-wrap posts-images">
					<li><a href="https://wa.me/9720806043"><i class="fa fa-whatsapp"></i> whatsapp</a></li>
					<li><a href="https://www.facebook.com/"><i class="fa fa-facebook" aria-hidden="true"></i> facebook</a></li>
					<li><a href="https://twitter.com/"><i class="fa fa-twitter" aria-hidden="true"></i> twitter</a></li>
					<li><a href="https://www.instagram.com/"><i class="fa fa-instagram" aria-hidden="true"></i> instagram</a></li>
				 </div>	
			</div>
			<div class="modal-footer">
			  <a href="{% url 'starting-page' %}"></a><button type="button" class="cmmn-btn book-btn slowHover" data-dismiss="modal">Back </button>
			</div>
		  </div>
		</div><!---modal-dialog-->
		<!--existing model-->
        <!-- Live Video Modal -->
<div id="liveVideoModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content for Live Video -->
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title">Go Live</h1>
            </div>
            <div class="modal-body">
                <div class="live-video-form">
                    <label for="live-video-url">Paste your social media URL:</label>
                    <input type="text" id="live-video-url" name="live-video-url" placeholder="Enter URL">

                    <!-- Add the "Add URL" button functionality -->
                    <button class="cmmn-btn live-video-btn slowHover" onclick="addLiveVideoUrl()">Add URL</button>
                </div>

                <!-- Previous Live Posts Container -->
                <div class="previous-live-posts">
                    <!-- Add content or iterate over previous live posts here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="cmmn-btn book-btn slowHover" data-dismiss="modal">Back</button>
            </div>
        </div>
    </div>
</div>
<!--existing model-->



  </div>


	<!--webpage-->
	<div class="webpage page-new-home" style="margin-top: 50px;">
		<div class="container-fluid">
			
			<div class="home-page-wrap">
				<div class="row">
					<div class="col-lg-2 col-md-6 col-sm-12 col-xs-12 home-left-col"> 
						<div class="home-left-area main-home-left-area">
							<div class="home-fltr-btn">
								<div class="dd-lft">
								<div class="dropdown">
									<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										<span><i class="fa fa-filter" aria-hidden="true"></i></span> Filter the View
									</button>
									<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
										<a class="dropdown-item" href="#"><i class="fa fa-filter" aria-hidden="true"></i>Friends</a>
										<a class="dropdown-item" href="#"><i class="fa fa-filter" aria-hidden="true"></i>Artists</a>
										<a class="dropdown-item" href="#"><i class="fa fa-filter" aria-hidden="true"></i>Bands</a>
										<a class="dropdown-item" href="#"><i class="fa fa-filter" aria-hidden="true"></i>Academies</a>
										<a class="dropdown-item" href="#"><i class="fa fa-filter" aria-hidden="true"></i>Jamming Stations</a>
									</div>
								</div>
							</div>
						</div>
						<div class="left-image-in">
							<img src=" /media/{{detail.img}} ">
							<p> {{detail.name}} </p>
						</div>
						<div class="home-left-area-btn">
							<button class="cmmn-btn slowHover" type="button">Book Jamming Space</button>
							<button class="cmmn-btn slowHover" type="button">Book a Tutor</button>
							<button class="cmmn-btn slowHover" type="button">Search Students</button>
						</div>
					</div>
				</div>
				<div class="col-lg-7 col-md-3 col-sm-12 col-xs-12 home-center-col"> 
					<div class="home-middle-area main-home-middle-area">
						{% if user.is_authenticated %}
						<form action=" {% url "starting-page" %} " method="post"  enctype="multipart/form-data">
							{% csrf_token %}
							<div class="middle-txt-area">
								<textarea id="" name="post-content" rows="4" cols="50" placeholder="Share your content....."></textarea>
							</div>
							<div class="middle-text-post">
								<ul>          
									<li><a href="https://www.youtube.com/"><img src="{% static 'images/video.png' %}"> Live Videos</a></li>
									<li>
										<label class="home-img-upload-section">
											<input class="home-img-upload" type="file" id = "img" name="post-image">
											<img src="{% static 'images/photo.png' %}">Photos/Videos
										</label>
									</li>
								
									<li><a href="{% url 'event_details' %}"><img src="{% static 'images/calendar.png' %}"> Events</a></li>
								</ul>
								<div class="home-middle-area-btn">
									<button class="cmmn-btn middle-area-btn slowHover" type="submit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>Post</button>
								</div>
							</div>
							</form> 
							
							{% endif %}

						{% for obj in post %}
						<!--Author - Abhinav Singh-->
						<div class="home-live-video-upload">
							<!-- Live Video Section -->
							<div class="live-video-section">
								<h3>live</h3>
								<!-- Add your modal or popup for live video here -->
								<button class="cmmn-btn slowHover" data-toggle="modal" data-target="#liveVideoModal">Live videos</button>
							</div>
						
							<!-- Upload Section -->
							<div class="upload-section">
								<h3>upload section</h3>
								<form action="{% url 'starting-page' %}" method="post" enctype="multipart/form-data">
									{% csrf_token %}
									<div class="middle-txt-area">
										<textarea id="" name="post-content" rows="4" cols="50" placeholder="Write something....."></textarea>
									</div>
									<!-- Your existing code for image upload and other options -->
									<div class="middle-text-post">
										<!-- Existing code for uploading images, videos, etc. -->
									</div>
									<div class="home-middle-area-btn">
										<button class="cmmn-btn middle-area-btn slowHover" type="submit">
											<i class="fa fa-pencil-square-o" aria-hidden="true"></i>Post
										</button>
									</div>
								</form>
							</div>
						</div>
						
						<!--Author - Abhinav Singh-->
						<div class="home-posts-wrap">



							<div class="white-heading">
								<h3> Posts From Contact </h3>
							</div>
							<div class="posts-images">
								<img src=" /media/{{obj.img}} " style="height: 300px;">
								<p>  {{obj.about}} </p>
								<ul>
									<form action="{% url 'like-post' %}" method="POST" class="ui form">
										{% csrf_token %}
									<input type="hidden" name="post_id" value="{{obj.id}}">
									{% if user not in obj.liked.all %}
									<li><button class="custom-icon-images fa fa-thumbs-up " aria-hidden="true" type="submit"></button>like</li>
									{% else %}
									<li><button class="custom-icon-images fa fa-thumbs-down  " aria-hidden="true" type="submit"></button>unLike</li>
									{% endif %}
									<li>{{ obj.liked.all.count }}likes</li>
								 
									<li><a href="#"><i class="fa fa-star" aria-hidden="true"></i> Rate</a></li>
									<li><a href="#"><i class="fa fa-commenting-o" aria-hidden="true"></i> Comment</a></li>
									<li><a href="#"><i class="fa fa-share-square-o" aria-hidden="true" type="button" data-toggle="modal" data-target="#bookModal"></i> Reshare</a></li>
									{% if user == obj.author %}
									<li><a href="{% url 'postedit' obj.id %}"><i class="fa fa-edit" aria-hidden="true"></i>Edit</a></li>
									<li><a href="/postdelete/{{obj.id}}"><button onclick="return confirm('Are you sure you want to delete this item?')"><i class="fa fa-cross" aria-hidden="true" type="button" onclick="return confirm('Are you sure you want to delete this item?')"></i>Delete</button></a></li>
									{% endif %}
								</form>
								</ul>
							</div>
						</div>
						{% endfor %}
					
						
						{% if post.has_other_pages %}


							{% for i in post.paginator.page_range %}
							{% if i == post.number %}
							<nav aria-label="...">
								<ul class="pagination">
									{% if post.has_previous %}
									<li class="page-item">
										<a class="page-link" href="?page=1" tabindex="-1">First</a>
									  </li>

								  <li class="page-item">
									<a class="page-link" href="?page={{post.previous_page_number}}" tabindex="-1">Previous</a>
								  </li>
								  {% endif %}
								  {% for n in totalpagelist %}
								  <li class="page-item"><a class="page-link" href="?page={{n}}">{{n}}</a></li>
								  {% endfor %}
								  {% if post.has_next %}
								  <li class="page-item">
									  <a class="page-link" href="?page={{post.next_page_number}}">Next</a>
									</li>
									<li class="page-item">
									  <a class="page-link" href="?page={{lastpage}}">Last</a>
									</li>
								  {% endif %}
								</ul>
							  </nav>
							
							{% endif %}
							{% endfor %}


						{% endif %}
				</div>

				
			</div>
			<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 home-right-col">
				<div class="home-right-area">
					<div class="home-advts">
						<div class="golden-heading">
							<h3>Advertisements</h3>
						</div>
						<div class="right-image">
							<img src=" /media/{{advertisement.img}} ">
						</div>
					</div>
					{% for obj in upComingEvent %}
					<div class="home-event">
						<div class="golden-heading">
							<h3>Upcoming Events</h3>
						</div>
						<div class="right-image">
							<img src=" /media/{{obj.img}} ">
						</div>
					</div>
					<div class="home-contact">
						<div class="golden-heading">
							<h3>Upcoming Events</h3>
						</div>
						<div class="home-contact-dtl">
							<table>
								<tr>
									<td><i class="fa fa-phone" aria-hidden="true"></i></td>
									<td><strong> Phone: </strong></td>
									<td><a href="#"> {{obj.phone}} </a></td>
									<!-- <td><a href="#"> 123 456 7890 </a></td> -->
								</tr>
								<tr>
									<td><i class="fa fa-envelope" aria-hidden="true"></i>
										<td><strong> Email: </strong></td>
										<td><a href="#"> {{obj.email}}</a></td>
									</tr>
									<tr>
										<td><i class="fa fa-map-marker" aria-hidden="true"></i> 
											<td><strong> Address:&nbsp;&nbsp;&nbsp; </strong></td>
											<td>{{obj.address}}</td>
										</tr>
									</table>
								</div>
							</div>
						</div>
						{% endfor %}
			</div>
		</div>
	</div>
	
	
	<!--webpage-->
	<!--scroll-to-top--> 
	<!-- <a id="scrollToTop" class="scroll-hide" href=""><i class="fas fa-chevron-up"></i></a>  -->
	<!--scroll-to-top-->

	

	{% endblock webpage %}

	{% block JS %}
	
		<script src=" {% static 'js/jquery.js' %}" type="text/javascript"></script>
		<script src=" {% static 'js/popper.min.js' %}" type="text/javascript"></script>
		<script src=" {% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
		<script src=" {% static 'js/owl.carousel.min.js' %}"></script>
		<script src=" {% static 'js/custom.js' %}" type="text/javascript"></script>

		<script type="text/javascript">
		$(function () {
		$('.toggle-menu').click(function(){
			$('.exo-menu').toggleClass('display');
		});
		});
		$(document).ready(function(){
		$(".toggle-menu").click(function(){
				$(".mobile-close").show(400);
			});
		$(".mobile-close").click(function(){
				$(".exo-menu").removeClass('display');
				$(this).hide(400);
			});
		});


		if ("userid" in localStorage) {

		// alert("userid found")
			document.getElementById("signin").style.display = "none";
			document.getElementById("signup").style.display = "none";
			//document.getElementById("vendor").style.display = "none";
			document.getElementById("profile").style.display = "inline-block";
			document.getElementById("logout").style.display = "inline-block";
			
			} else {
			// alert("Not found")
			document.getElementById("signin").style.display = "inline-block";
			document.getElementById("signup").style.display = "inline-block";
			//document.getElementById("vendor").style.display = "inline-block";
			document.getElementById("profile").style.display = "none";
			document.getElementById("logout").style.display = "none";
			}


			<!-- JavaScript function to handle adding live video URL -->
<script>
    function addLiveVideoUrl() {
        // Add your logic to handle the live video URL
        // This function can be extended to perform AJAX requests or other actions
        alert("URL added successfully!");
    }
</script>

<!--webpage-->
<div class="webpage page-new-home" style="margin-top: 50px;">
    <!-- Existing webpage content continues... -->
    <!-- ... (Your existing content) ... -->
</div>
</script>

	{% endblock JS %}
